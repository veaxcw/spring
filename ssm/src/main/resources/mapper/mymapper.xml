<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="main.mybatis.chapter3Core.mapper.RoleMapper">

    <resultMap id="roleBaseMap" type="role">
        <id column="id" property="id" jdbcType="INTEGER"/>
        <result column="roleName" property="roleName" jdbcType="VARCHAR"/>
        <result column="note" property="note" typeHandler="main.mybatis.chapter4Config.MyTypeHandler"/>
    </resultMap>

    <sql id="colNames" >
        id,roleName,note
    </sql>

    <select id="getRole" resultMap="roleBaseMap" parameterType="INTEGER">
        select <include refid="colName"/> from role where  id = #{id}
    </select>

    <select id="findRoleByRoleName" parameterType="String" resultMap="roleBaseMap">
        select id,roleName,note from role where roleName like concat('%',#{roleName,jdbcType=VARCHAR,javaType=String},'%')
    </select>

    <select id="findRoleByNote" parameterType="String" resultMap="roleBaseMap">
        select id,roleName,note from role where roleName like concat('%',#{note,typeHandler=main.chapter4.MyTypeHandler},'%')
    </select>

    <select id="getALL" resultMap="roleBaseMap">
        select id,roleName,note from role where roleName like concat('%',#{roleName},'%') and note like concat('%',#{note},'%')
    </select>

    <insert id="insertRole" parameterType="role"><!--role 简称-->
        insert into role(roleName,note)values(#{roleName},#{note})
    </insert>

    <delete id="deleteRole" parameterType="INTEGER">
        delete from role where id = #{id}
    </delete>

    <update id="updateRole" parameterType="role">
        update role set roleName = #{roleName},note = #{note}where id =#{id}
    </update>

</mapper>